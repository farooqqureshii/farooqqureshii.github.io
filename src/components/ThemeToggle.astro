<button
  id="theme-toggle"
  class="theme-toggle-animate flex items-center justify-center w-6 h-6 transition-colors duration-200 ease-in-out hover:opacity-80"
  aria-label="Toggle theme"
  type="button"
>
  <span class="sr-only">Toggle theme</span>
  
  <!-- Simple line that rotates around its center -->
  <span
    id="theme-line"
    class="block w-4 h-0.5 bg-current transition-transform duration-300 ease-in-out"
    style="color: #18181b; transform-origin: center center;"
  ></span>
  
  <style>
    html.dark #theme-line {
      color: #e4e4e7 !important;
      transform: rotate(90deg);
    }
    html:not(.dark) #theme-line {
      transform: rotate(0deg);
    }
  </style>
</button>

<script>
  const setListener = () => {
    const button = document.getElementById("theme-toggle");
    button?.addEventListener("click", () => {
      // Play sound effect
      const audio = new Audio("/static/sound.mp3");
      audio.volume = 0.3; // Set volume to 30% to keep it subtle
      audio.play().catch(e => console.log("Audio play failed:", e)); // Handle cases where audio might fail
      
      document.documentElement.classList.toggle("dark");
    });
  };
  setListener();
  document.addEventListener("astro:after-swap", setListener);
</script>
